using Dice

function cg()
    flip43 = flip(0.8)
    flip44 = flip(0.37499999999999994)
    flip45 = flip(0.7)
    flip46 = flip(0.5714285714285715)
    flip47 = flip(0.5)
    flip48 = flip(0.8)
    flip49 = flip(0.37499999999999994)
    flip50 = flip(0.7)
    flip51 = flip(0.5714285714285715)
    flip52 = flip(0.5)
    flip53 = flip(0.8)
    flip54 = flip(0.37499999999999994)
    flip55 = flip(0.7)
    flip56 = flip(0.5714285714285715)
    flip57 = flip(0.5)
    flip58 = flip(0.8)
    flip59 = flip(0.37499999999999994)
    flip60 = flip(0.7)
    flip61 = flip(0.5714285714285715)
    flip62 = flip(0.5)
    flip63 = flip(0.8)
    flip64 = flip(0.37499999999999994)
    flip65 = flip(0.7)
    flip66 = flip(0.5714285714285715)
    flip67 = flip(0.5)
    flip68 = flip(0.8)
    flip69 = flip(0.37499999999999994)
    flip70 = flip(0.7)
    flip71 = flip(0.5714285714285715)
    flip72 = flip(0.5)
    flip73 = flip(0.8)
    flip74 = flip(0.37499999999999994)
    flip75 = flip(0.7)
    flip76 = flip(0.5714285714285715)
    flip77 = flip(0.5)
    flip78 = flip(0.8)
    flip79 = flip(0.37499999999999994)
    b1 = DistNot(flip43)
    b2 = DistNot(flip44)
    b3 = DistIte(flip43, b2, DistFalse())
    b4 = DistNot(flip43)
    b5 = DistNot(flip43)
    b6 = DistNot(flip43)
    b7 = DistAnd(b5, b6)
    b8 = DistAnd(flip43, b6)
    b9 = DistAnd(flip43, flip43)
    b10 = DistIte(b9, flip45, DistTrue())
    b11 = DistIte(b8, DistTrue(), b10)
    b12 = DistIte(b7, flip48, b11)
    b13 = DistIte(flip45, flip46, DistFalse())
    b14 = DistIte(b9, b13, DistFalse())
    b15 = DistIte(b8, flip47, b14)
    b16 = DistIte(b7, DistFalse(), b15)
    b17 = DistNot(flip48)
    b18 = DistNot(flip46)
    b19 = DistIte(flip45, b18, DistTrue())
    b20 = DistIte(b9, b19, DistTrue())
    b21 = DistIte(b8, DistTrue(), b20)
    b22 = DistIte(b7, b17, b21)
    b23 = DistNot(flip49)
    b24 = DistIte(flip48, b23, DistFalse())
    b25 = DistNot(flip46)
    b26 = DistIte(flip45, b25, DistTrue())
    b27 = DistIte(b9, b26, DistFalse())
    b28 = DistIte(b8, flip47, b27)
    b29 = DistIte(b7, b24, b28)
    b30 = DistNot(flip48)
    b31 = DistNot(b8)
    b32 = DistAnd(flip45, flip46)
    b33 = DistIte(b9, b32, DistTrue())
    b34 = DistAnd(b31, b33)
    b35 = DistIte(b7, b30, b34)
    b36 = DistNot(b7)
    b37 = DistNot(b8)
    b38 = DistNot(b9)
    b39 = DistAnd(b37, b38)
    b40 = DistAnd(b36, b39)
    b41 = DistNot(b7)
    b42 = DistNot(flip47)
    b43 = DistNot(flip45)
    b44 = DistAnd(b9, b43)
    b45 = DistIte(b8, b42, b44)
    b46 = DistAnd(b41, b45)
    b47 = DistNot(b46)
    b48 = DistNot(flip46)
    b49 = DistIte(flip45, b48, DistFalse())
    b50 = DistIte(b9, b49, flip43)
    b51 = DistIte(b8, DistFalse(), b50)
    b52 = DistIte(b7, flip48, b51)
    b53 = DistNot(b52)
    b54 = DistAnd(b47, b53)
    b55 = DistNot(flip48)
    b56 = DistIte(b9, flip45, b6)
    b57 = DistIte(b8, flip47, b56)
    b58 = DistIte(b7, b55, b57)
    b59 = DistAnd(b54, b58)
    b60 = DistNot(b46)
    b61 = DistAnd(b60, b52)
    b62 = DistAnd(b61, b58)
    b63 = DistNot(b46)
    b64 = DistAnd(b63, b52)
    b65 = DistNot(b58)
    b66 = DistAnd(b64, b65)
    b67 = DistIte(b66, flip50, DistTrue())
    b68 = DistIte(b62, DistTrue(), b67)
    b69 = DistIte(b59, flip53, b68)
    b70 = DistIte(flip50, flip51, DistFalse())
    b71 = DistIte(b66, b70, DistFalse())
    b72 = DistIte(b62, flip52, b71)
    b73 = DistIte(b59, DistFalse(), b72)
    b74 = DistNot(flip53)
    b75 = DistNot(flip51)
    b76 = DistIte(flip50, b75, DistTrue())
    b77 = DistIte(b66, b76, DistTrue())
    b78 = DistIte(b62, DistTrue(), b77)
    b79 = DistIte(b59, b74, b78)
    b80 = DistNot(flip54)
    b81 = DistIte(flip53, b80, DistFalse())
    b82 = DistNot(flip51)
    b83 = DistIte(flip50, b82, DistTrue())
    b84 = DistIte(b66, b83, DistFalse())
    b85 = DistIte(b62, flip52, b84)
    b86 = DistIte(b59, b81, b85)
    b87 = DistNot(flip53)
    b88 = DistNot(b62)
    b89 = DistAnd(flip50, flip51)
    b90 = DistIte(b66, b89, DistTrue())
    b91 = DistAnd(b88, b90)
    b92 = DistIte(b59, b87, b91)
    b93 = DistNot(b59)
    b94 = DistNot(b62)
    b95 = DistNot(b66)
    b96 = DistAnd(b94, b95)
    b97 = DistAnd(b93, b96)
    b98 = DistNot(b59)
    b99 = DistNot(flip52)
    b100 = DistNot(flip50)
    b101 = DistIte(b66, b100, b46)
    b102 = DistIte(b62, b99, b101)
    b103 = DistAnd(b98, b102)
    b104 = DistNot(b103)
    b105 = DistNot(flip51)
    b106 = DistIte(flip50, b105, DistFalse())
    b107 = DistIte(b66, b106, b52)
    b108 = DistIte(b62, DistFalse(), b107)
    b109 = DistIte(b59, flip53, b108)
    b110 = DistNot(b109)
    b111 = DistAnd(b104, b110)
    b112 = DistNot(flip53)
    b113 = DistIte(b66, flip50, b58)
    b114 = DistIte(b62, flip52, b113)
    b115 = DistIte(b59, b112, b114)
    b116 = DistAnd(b111, b115)
    b117 = DistNot(b103)
    b118 = DistAnd(b117, b109)
    b119 = DistAnd(b118, b115)
    b120 = DistNot(b103)
    b121 = DistAnd(b120, b109)
    b122 = DistNot(b115)
    b123 = DistAnd(b121, b122)
    b124 = DistIte(b123, flip55, DistTrue())
    b125 = DistIte(b119, DistTrue(), b124)
    b126 = DistIte(b116, flip58, b125)
    b127 = DistIte(flip55, flip56, DistFalse())
    b128 = DistIte(b123, b127, DistFalse())
    b129 = DistIte(b119, flip57, b128)
    b130 = DistIte(b116, DistFalse(), b129)
    b131 = DistNot(flip58)
    b132 = DistNot(flip56)
    b133 = DistIte(flip55, b132, DistTrue())
    b134 = DistIte(b123, b133, DistTrue())
    b135 = DistIte(b119, DistTrue(), b134)
    b136 = DistIte(b116, b131, b135)
    b137 = DistNot(flip59)
    b138 = DistIte(flip58, b137, DistFalse())
    b139 = DistNot(flip56)
    b140 = DistIte(flip55, b139, DistTrue())
    b141 = DistIte(b123, b140, DistFalse())
    b142 = DistIte(b119, flip57, b141)
    b143 = DistIte(b116, b138, b142)
    b144 = DistNot(flip58)
    b145 = DistNot(b119)
    b146 = DistAnd(flip55, flip56)
    b147 = DistIte(b123, b146, DistTrue())
    b148 = DistAnd(b145, b147)
    b149 = DistIte(b116, b144, b148)
    b150 = DistNot(b116)
    b151 = DistNot(b119)
    b152 = DistNot(b123)
    b153 = DistAnd(b151, b152)
    b154 = DistAnd(b150, b153)
    b155 = DistNot(b116)
    b156 = DistNot(flip57)
    b157 = DistNot(flip55)
    b158 = DistIte(b123, b157, b103)
    b159 = DistIte(b119, b156, b158)
    b160 = DistAnd(b155, b159)
    b161 = DistNot(b160)
    b162 = DistNot(flip56)
    b163 = DistIte(flip55, b162, DistFalse())
    b164 = DistIte(b123, b163, b109)
    b165 = DistIte(b119, DistFalse(), b164)
    b166 = DistIte(b116, flip58, b165)
    b167 = DistNot(b166)
    b168 = DistAnd(b161, b167)
    b169 = DistNot(flip58)
    b170 = DistIte(b123, flip55, b115)
    b171 = DistIte(b119, flip57, b170)
    b172 = DistIte(b116, b169, b171)
    b173 = DistAnd(b168, b172)
    b174 = DistNot(b160)
    b175 = DistAnd(b174, b166)
    b176 = DistAnd(b175, b172)
    b177 = DistNot(b160)
    b178 = DistAnd(b177, b166)
    b179 = DistNot(b172)
    b180 = DistAnd(b178, b179)
    b181 = DistIte(b180, flip60, DistTrue())
    b182 = DistIte(b176, DistTrue(), b181)
    b183 = DistIte(b173, flip63, b182)
    b184 = DistIte(flip60, flip61, DistFalse())
    b185 = DistIte(b180, b184, DistFalse())
    b186 = DistIte(b176, flip62, b185)
    b187 = DistIte(b173, DistFalse(), b186)
    b188 = DistNot(flip63)
    b189 = DistNot(flip61)
    b190 = DistIte(flip60, b189, DistTrue())
    b191 = DistIte(b180, b190, DistTrue())
    b192 = DistIte(b176, DistTrue(), b191)
    b193 = DistIte(b173, b188, b192)
    b194 = DistNot(flip64)
    b195 = DistIte(flip63, b194, DistFalse())
    b196 = DistNot(flip61)
    b197 = DistIte(flip60, b196, DistTrue())
    b198 = DistIte(b180, b197, DistFalse())
    b199 = DistIte(b176, flip62, b198)
    b200 = DistIte(b173, b195, b199)
    b201 = DistNot(flip63)
    b202 = DistNot(b176)
    b203 = DistAnd(flip60, flip61)
    b204 = DistIte(b180, b203, DistTrue())
    b205 = DistAnd(b202, b204)
    b206 = DistIte(b173, b201, b205)
    b207 = DistNot(b173)
    b208 = DistNot(b176)
    b209 = DistNot(b180)
    b210 = DistAnd(b208, b209)
    b211 = DistAnd(b207, b210)
    b212 = DistNot(b173)
    b213 = DistNot(flip62)
    b214 = DistNot(flip60)
    b215 = DistIte(b180, b214, b160)
    b216 = DistIte(b176, b213, b215)
    b217 = DistAnd(b212, b216)
    b218 = DistNot(b217)
    b219 = DistNot(flip61)
    b220 = DistIte(flip60, b219, DistFalse())
    b221 = DistIte(b180, b220, b166)
    b222 = DistIte(b176, DistFalse(), b221)
    b223 = DistIte(b173, flip63, b222)
    b224 = DistNot(b223)
    b225 = DistAnd(b218, b224)
    b226 = DistNot(flip63)
    b227 = DistIte(b180, flip60, b172)
    b228 = DistIte(b176, flip62, b227)
    b229 = DistIte(b173, b226, b228)
    b230 = DistAnd(b225, b229)
    b231 = DistNot(b217)
    b232 = DistAnd(b231, b223)
    b233 = DistAnd(b232, b229)
    b234 = DistNot(b217)
    b235 = DistAnd(b234, b223)
    b236 = DistNot(b229)
    b237 = DistAnd(b235, b236)
    b238 = DistIte(b237, flip65, DistTrue())
    b239 = DistIte(b233, DistTrue(), b238)
    b240 = DistIte(b230, flip68, b239)
    b241 = DistIte(flip65, flip66, DistFalse())
    b242 = DistIte(b237, b241, DistFalse())
    b243 = DistIte(b233, flip67, b242)
    b244 = DistIte(b230, DistFalse(), b243)
    b245 = DistNot(flip68)
    b246 = DistNot(flip66)
    b247 = DistIte(flip65, b246, DistTrue())
    b248 = DistIte(b237, b247, DistTrue())
    b249 = DistIte(b233, DistTrue(), b248)
    b250 = DistIte(b230, b245, b249)
    b251 = DistNot(flip69)
    b252 = DistIte(flip68, b251, DistFalse())
    b253 = DistNot(flip66)
    b254 = DistIte(flip65, b253, DistTrue())
    b255 = DistIte(b237, b254, DistFalse())
    b256 = DistIte(b233, flip67, b255)
    b257 = DistIte(b230, b252, b256)
    b258 = DistNot(flip68)
    b259 = DistNot(b233)
    b260 = DistAnd(flip65, flip66)
    b261 = DistIte(b237, b260, DistTrue())
    b262 = DistAnd(b259, b261)
    b263 = DistIte(b230, b258, b262)
    b264 = DistNot(b230)
    b265 = DistNot(b233)
    b266 = DistNot(b237)
    b267 = DistAnd(b265, b266)
    b268 = DistAnd(b264, b267)
    b269 = DistNot(b230)
    b270 = DistNot(flip67)
    b271 = DistNot(flip65)
    b272 = DistIte(b237, b271, b217)
    b273 = DistIte(b233, b270, b272)
    b274 = DistAnd(b269, b273)
    b275 = DistNot(b274)
    b276 = DistNot(flip66)
    b277 = DistIte(flip65, b276, DistFalse())
    b278 = DistIte(b237, b277, b223)
    b279 = DistIte(b233, DistFalse(), b278)
    b280 = DistIte(b230, flip68, b279)
    b281 = DistNot(b280)
    b282 = DistAnd(b275, b281)
    b283 = DistNot(flip68)
    b284 = DistIte(b237, flip65, b229)
    b285 = DistIte(b233, flip67, b284)
    b286 = DistIte(b230, b283, b285)
    b287 = DistAnd(b282, b286)
    b288 = DistNot(b274)
    b289 = DistAnd(b288, b280)
    b290 = DistAnd(b289, b286)
    b291 = DistNot(b274)
    b292 = DistAnd(b291, b280)
    b293 = DistNot(b286)
    b294 = DistAnd(b292, b293)
    b295 = DistIte(b294, flip70, DistTrue())
    b296 = DistIte(b290, DistTrue(), b295)
    b297 = DistIte(b287, flip73, b296)
    b298 = DistIte(flip70, flip71, DistFalse())
    b299 = DistIte(b294, b298, DistFalse())
    b300 = DistIte(b290, flip72, b299)
    b301 = DistIte(b287, DistFalse(), b300)
    b302 = DistNot(flip73)
    b303 = DistNot(flip71)
    b304 = DistIte(flip70, b303, DistTrue())
    b305 = DistIte(b294, b304, DistTrue())
    b306 = DistIte(b290, DistTrue(), b305)
    b307 = DistIte(b287, b302, b306)
    b308 = DistNot(flip74)
    b309 = DistIte(flip73, b308, DistFalse())
    b310 = DistNot(flip71)
    b311 = DistIte(flip70, b310, DistTrue())
    b312 = DistIte(b294, b311, DistFalse())
    b313 = DistIte(b290, flip72, b312)
    b314 = DistIte(b287, b309, b313)
    b315 = DistNot(flip73)
    b316 = DistNot(b290)
    b317 = DistAnd(flip70, flip71)
    b318 = DistIte(b294, b317, DistTrue())
    b319 = DistAnd(b316, b318)
    b320 = DistIte(b287, b315, b319)
    b321 = DistNot(b287)
    b322 = DistNot(b290)
    b323 = DistNot(b294)
    b324 = DistAnd(b322, b323)
    b325 = DistAnd(b321, b324)
    b326 = DistNot(b287)
    b327 = DistNot(flip72)
    b328 = DistNot(flip70)
    b329 = DistIte(b294, b328, b274)
    b330 = DistIte(b290, b327, b329)
    b331 = DistAnd(b326, b330)
    b332 = DistNot(b331)
    b333 = DistNot(flip71)
    b334 = DistIte(flip70, b333, DistFalse())
    b335 = DistIte(b294, b334, b280)
    b336 = DistIte(b290, DistFalse(), b335)
    b337 = DistIte(b287, flip73, b336)
    b338 = DistNot(b337)
    b339 = DistAnd(b332, b338)
    b340 = DistNot(flip73)
    b341 = DistIte(b294, flip70, b286)
    b342 = DistIte(b290, flip72, b341)
    b343 = DistIte(b287, b340, b342)
    b344 = DistAnd(b339, b343)
    b345 = DistNot(b331)
    b346 = DistAnd(b345, b337)
    b347 = DistAnd(b346, b343)
    b348 = DistNot(b331)
    b349 = DistAnd(b348, b337)
    b350 = DistNot(b343)
    b351 = DistAnd(b349, b350)
    b352 = DistIte(b351, flip75, DistTrue())
    b353 = DistIte(b347, DistTrue(), b352)
    b354 = DistIte(b344, flip78, b353)
    b355 = DistIte(flip75, flip76, DistFalse())
    b356 = DistIte(b351, b355, DistFalse())
    b357 = DistIte(b347, flip77, b356)
    b358 = DistIte(b344, DistFalse(), b357)
    b359 = DistNot(flip78)
    b360 = DistNot(flip76)
    b361 = DistIte(flip75, b360, DistTrue())
    b362 = DistIte(b351, b361, DistTrue())
    b363 = DistIte(b347, DistTrue(), b362)
    b364 = DistIte(b344, b359, b363)
    b365 = DistNot(flip79)
    b366 = DistIte(flip78, b365, DistFalse())
    b367 = DistNot(flip76)
    b368 = DistIte(flip75, b367, DistTrue())
    b369 = DistIte(b351, b368, DistFalse())
    b370 = DistIte(b347, flip77, b369)
    b371 = DistIte(b344, b366, b370)
    b372 = DistNot(flip78)
    b373 = DistNot(b347)
    b374 = DistAnd(flip75, flip76)
    b375 = DistIte(b351, b374, DistTrue())
    b376 = DistAnd(b373, b375)
    b377 = DistIte(b344, b372, b376)
    b378 = DistNot(b344)
    b379 = DistNot(b347)
    b380 = DistNot(b351)
    b381 = DistAnd(b379, b380)
    b382 = DistAnd(b378, b381)
    [DistChar(DistInt([flip43, DistFalse(), b1, b3, b4])), DistChar(DistInt([b12, b16, b22, b29, b35, b40])), DistChar(DistInt([b69, b73, b79, b86, b92, b97])), DistChar(DistInt([b126, b130, b136, b143, b149, b154])), DistChar(DistInt([b183, b187, b193, b200, b206, b211])), DistChar(DistInt([b240, b244, b250, b257, b263, b268])), DistChar(DistInt([b297, b301, b307, b314, b320, b325])), DistChar(DistInt([b354, b358, b364, b371, b377, b382]))]
end

d1 = infer(cg()[1:7])
d2 = infer(cg()[1:7])
@assert d1 ≈ d2  # this passes

d1 = infer(cg()[1:8])
d2 = infer(cg()[1:8])
@assert d1 ≈ d2 # this fails! also note that d1, d2 are gibberish...